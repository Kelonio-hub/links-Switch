<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Redirigiendo...</title>
    <script>
        function abrirYcerrar() {
            // Obtener el parámetro "form" de la URL
            const urlParams = new URLSearchParams(window.location.search);
            const formId = urlParams.get('form') || '1'; // Por defecto, usa el formulario 1 si no hay parámetro

            // Definir los enlaces de SharePoint según el formulario
            const sharepointLinks = {
                '1': 'https://8wb0d8-my.sharepoint.com/:f:/g/personal/kelonio_levelt_me1/ElU99ZUq-IpFti2zfnmyX3gBQS4mhNBLw_gWwDfklufbqg?e=ExhKkx', // SEMIBRICK SWITCH
                '2': '', // 
                '3': '', // 
                '4': '', //                 
                '5': ''  // 
            };

            // Seleccionar el enlace de SharePoint según el formulario
            const sharepointUrl = sharepointLinks[formId] || sharepointLinks['1']; // Fallback al enlace del Formulario 1

            // Abrir las pestañas y verificar si se abren
            const discordWindow = window.open("https://discord.gg/8Fv8GDg", "_blank"); // Discord
            const amazonWindow = window.open("https://amzn.to/3DSlb4e", "_blank");    // Amazon Prime
            const sharepointWindow = window.open(sharepointUrl, "_blank");            // SharePoint dinámico

            // Intentar cerrar la ventana después de un retraso
            setTimeout(function() {
                // Verificar si las pestañas se abrieron (si alguna es null, el bloqueador impidió la apertura)
                if (!discordWindow || !amazonWindow || !sharepointWindow) {
                    document.body.innerHTML = "<p>Error: No se abrieron las pestañas. Desactiva el bloqueador de pop-ups y actualiza la página.</p>";
                } else {
                    window.close();
                    // Si window.close() falla, mostrar mensaje
                    document.body.innerHTML = "<p>Redirección completa. Puedes cerrar esta pestaña manualmente.</p>";
                }
            }, 1000); // Aumentado a 1 segundo para mayor compatibilidad
        }

        // Ejecutar al cargar la página
        window.onload = abrirYcerrar;
    </script>
</head>
<body>
    <p>Redirigiendo... Si las pestañas no se abren, desactiva el bloqueador de pop-ups y actualiza la página.</p>
</body>
</html>